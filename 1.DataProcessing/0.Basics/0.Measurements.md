机器学习中模型评估中常用的指标。



![image-20210615170937756](../figs/image-20210615170937756.png)



对于二分类问题，考虑 TP/TN/FP/FN表示分类结果。其中T和F表示真实值与预测值是否相符；P和N表示**预测**结果为正或负。根据这两个标识即可判断在二分类table中的位置。



常用专名：

**Sensitivity**：敏感性，即**TPR（真正例率）**，其实就是**recall**，即召回率，计算公式：

**TPR = TP/(TP+FN)**

也就是预测为P的样本数占所有样本中真正的P样本的比例。用来考察所有的正样本中被捞回了百分之多少。1-TPR即为FNR，假负例率，即真实的P样本中有多少被错判为了N。

**Specificity**：特异性，即**1-FPR（假正例率）**，计算公式为：

**Specificity = TN/(TN+FP)**

特异性即真N样本中有多少被预测对了。FPR表示有百分之多少的负样本被错误地预测成了正样本。FPR在某些场景也被称为误诊率。

FP和FN实际上代表的就是统计推断中的第一类/第二类错误率（Type I / Type II error）

FPR和TPR在计算AUC时会被用到，这两个指标取消了实际的样本数量，都根据PN样本各自的规模归一化成为比例。



#### AUC

以FPR为横轴，TPR为纵轴，通过选择不同的阈值，可以做ROC曲线。具体操作如下：将预测结果以prob或者得分进行排序，然后从小到大选择阈值，记做thr，把所有大于thr的样本都判断为正，然后考察这些判断为正的样本中有多少TP，有多少FP（也就是被判错的负样本），用TP除以总的真实的P样本数，用FP除以总的真实的N样本数，就分别得到了TPR和FPR。不停调整阈值thr，即可得到一系列的TPR和FPR，画在坐标系中，由于是比例，因此范围在0-1之间。得到的即为ROC曲线。AUC为ROC曲线下的面积。

**AUC的理解**：横轴FPR，即代表某种代价，即将负样本也捎带着捞出来的代价。纵轴TPR，即我们的目标，即将正样本尽可能多的捞出来。所以AUC代表的是在同样的代价下，哪个模型可以更好地完成目标。优化AUC也就是希望能用更少的代价得到更好的想要的结果。

**AUC的优点**：用比例代替绝对值，和PR Curve相比，AUC对于样本不均衡的情况更加稳定。



#### KS

**KS Curve**，KS曲线，又称 **洛伦兹曲线**。KS曲线实际上就是把ROC曲线的那个“隐变量”thr作为横轴，然后TPR和FPR分别作为纵轴进行作图，从而可以看出随着thr增加，TPR和FPR的变化趋势以及两者之间的关系（差距）。

一个好的模型应该在thr确定的情况下，TPR和FPR有较大的差值，因此KS将max(TPR(thr) - FPR(thr))作为衡量标准，称为KS值。直观上来说，KS值就是KS曲线上两曲线相距最远的那个距离（同一个thr）。

KS曲线在风控建模场景有很重要的作用。因为一个风控策略所放进来的好客户和坏客户的差距直接影响到最终的收益。如果以牺牲一部分好客户（通常视为负样本）为代价，可以屏蔽掉更多的坏客户（正样本），那么最终在收益上不一定都是负向的。因此，KS关注的是某个thr下的极值，这个极值就是模拟实际应用中的准入边界。这一点和AUC评估模型的整体效果侧重不同。



#### Gini系数







#### CAP（Cumulative Accuracy Profile）/ AR（Accuracy Ratio）









#### Lift





#### PSI





#### Precison & Recall, PR Curve





#### mAP





#### mIoU





#### FWIoU























